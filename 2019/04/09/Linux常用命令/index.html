<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">























  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext">
  






<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=6.7.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.7.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.7.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.7.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="文件、目录 绝对路径：『一定由根目录 / 写起』；相对路径：『不是由 / 写起』 比较特殊的目录 12345.         代表此层目录..        代表上一层目录-         代表前一个工作目录~         代表『目前使用者身份』所在的家目录~account  代表 account 这个使用者的家目录(account是个帐号名称)  常见的处理目录的命令  cd：Chang">
<meta name="keywords" content="Linux,shell">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux常用命令">
<meta property="og:url" content="http://ywtail.github.io/2019/04/09/Linux常用命令/index.html">
<meta property="og:site_name" content="ywtail&#39;s blog">
<meta property="og:description" content="文件、目录 绝对路径：『一定由根目录 / 写起』；相对路径：『不是由 / 写起』 比较特殊的目录 12345.         代表此层目录..        代表上一层目录-         代表前一个工作目录~         代表『目前使用者身份』所在的家目录~account  代表 account 这个使用者的家目录(account是个帐号名称)  常见的处理目录的命令  cd：Chang">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-04-22T07:36:19.248Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Linux常用命令">
<meta name="twitter:description" content="文件、目录 绝对路径：『一定由根目录 / 写起』；相对路径：『不是由 / 写起』 比较特殊的目录 12345.         代表此层目录..        代表上一层目录-         代表前一个工作目录~         代表『目前使用者身份』所在的家目录~account  代表 account 这个使用者的家目录(account是个帐号名称)  常见的处理目录的命令  cd：Chang">






  <link rel="canonical" href="http://ywtail.github.io/2019/04/09/Linux常用命令/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Linux常用命令 | ywtail's blog</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ywtail's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://ywtail.github.io/2019/04/09/Linux常用命令/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ywtail">
      <meta itemprop="description" content="Be a man.">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ywtail's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Linux常用命令

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-04-09 19:54:00" itemprop="dateCreated datePublished" datetime="2019-04-09T19:54:00+08:00">2019-04-09</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-22 15:36:19" itemprop="dateModified" datetime="2019-04-22T15:36:19+08:00">2019-04-22</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <a href="/2019/04/09/Linux常用命令/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2019/04/09/Linux常用命令/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
            <span id="/2019/04/09/Linux常用命令/" class="leancloud_visitors" data-flag-title="Linux常用命令">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="文件、目录"><a href="#文件、目录" class="headerlink" title="文件、目录"></a>文件、目录</h2><ul>
<li>绝对路径：『一定由根目录 / 写起』；相对路径：『不是由 / 写起』</li>
<li><p>比较特殊的目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.         代表此层目录</span><br><span class="line">..        代表上一层目录</span><br><span class="line">-         代表前一个工作目录</span><br><span class="line">~         代表『目前使用者身份』所在的家目录</span><br><span class="line">~account  代表 account 这个使用者的家目录(account是个帐号名称)</span><br></pre></td></tr></table></figure>
</li>
<li><p>常见的处理目录的命令</p>
<ul>
<li>cd：Change Directory 变换目录</li>
<li>pwd：Print Working Directory 显示目前的目录</li>
<li>mkdir：make directory 创建一个新的目录</li>
<li>rmdir：删除一个空的目录。仅能删除空目录，要删除非空目录需使用<code>rm -r</code>命令</li>
</ul>
</li>
<li>使用者能使用的命令是依据 PATH 变量所规定的目录去搜寻的；</li>
<li>不同的身份(root 与一般用户)系统默认的 PATH 并不相同。差异较大的地方在於 /sbin, /usr/sbin ；</li>
<li>ls 可以检视文件的属性，尤其 -d, -a, -l 等选项特别重要！</li>
<li>文件的复制、删除、移动可以分别使用：cp, rm , mv等命令来操作；</li>
<li>检查文件的内容(读档)可使用的命令包括有：cat, tac, nl, more, less, head, tail, od 等</li>
<li>cat -n 与 nl 均可显示行号，但默认的情况下，空白行会不会编号并不相同；</li>
<li>touch 的目的在修改文件的时间参数，但亦可用来创建空文件；</li>
<li>一个文件记录的时间参数有三种，分别是 access time(atime), status time (ctime), modification time(mtime)，ls 默认显示的是 mtime。</li>
<li>新建文件/目录时，新文件的默认权限使用 umask 来规范。默认目录完全权限为drwxrwxrwx， 文件则为-rw-rw-rw-。</li>
<li>观察文件的类型可以使用 file 命令来观察；</li>
<li>搜寻命令的完整档名可用 which 或 type ，这两个命令都是透过 PATH 变量来搜寻档名；</li>
<li>搜寻文件的完整档名可以使用 whereis 或 locate 到数据库文件去搜寻，而不实际搜寻文件系统；</li>
<li>利用 find 可以加入许多选项来直接查询文件系统，以获得自己想要知道的档名。</li>
</ul>
<h3 id="chmod-文件权限"><a href="#chmod-文件权限" class="headerlink" title="chmod 文件权限"></a>chmod 文件权限</h3><ul>
<li><code>chmod 选项 文件名</code> 变更文件或目录权限<ul>
<li>r 读取权限，4</li>
<li>w 写入， 2</li>
<li>x 执行，1</li>
</ul>
</li>
<li><code>chmod 750 filename/*.sh</code> 批量修改为可执行文件</li>
</ul>
<h3 id="cd"><a href="#cd" class="headerlink" title="cd"></a>cd</h3><blockquote>
<p><code>cd [相对路径或绝对路径]</code> 最重要的就是目录的绝对路径与相对路径，还有一些特殊目录的符号</p>
</blockquote>
<ul>
<li><code>cd -</code> 返回上一个目录（非上一层），上一层为<code>cd ..</code></li>
<li><code>cd ~</code> 或 <code>cd</code> 回到当前账号home目录，亦即是 /root 这个目录</li>
<li><code>cd ~vbird</code> 到 vbird 这个使用者的家目录，亦即 /home/vbird</li>
</ul>
<h3 id="pwd"><a href="#pwd" class="headerlink" title="pwd"></a>pwd</h3><blockquote>
<p><code>pwd [-P]</code>：<br><code>-P</code>  ：显示出确实的路径，而非使用链接 (link) 路径。</p>
</blockquote>
<ul>
<li><code>pwd</code> 显示出目前的工作目录</li>
<li><code>pwd -P</code> 显示出实际的工作目录，而非链接路径，P要大写</li>
</ul>
<h3 id="mkdir"><a href="#mkdir" class="headerlink" title="mkdir"></a>mkdir</h3><blockquote>
<p><code>mkdir [-mp] 目录名称</code>:<br><code>-m</code> ：配置文件的权限。直接配置，不需要看默认权限 (umask)<br><code>-p</code> ：帮助你直接将所需要的目录(包含上一级目录)递回创建起来！</p>
</blockquote>
<ul>
<li><code>mkdir -m 711 test2</code> 创建权限为rwx—x—x的目录</li>
<li><code>mkdir -p</code> 建立嵌套目录。-p, —parents  可以是一个路径名称。此时若路径中的某些目录尚不存在,加上此选项后,系统将自动建立好那些尚不存在的目录,即一次可以建立多级目录</li>
</ul>
<h3 id="rmdir"><a href="#rmdir" class="headerlink" title="rmdir"></a>rmdir</h3><blockquote>
<p><code>rmdir [-p] 目录名称</code>：<code>-p</code> ：连同上一级『空的』目录也一起删除<br>注意：只能删除空目录</p>
</blockquote>
<p>假设有目录结构<code>test1/test2/test3/test4</code>，都是空目录</p>
<ul>
<li><code>rmdir test1/test2/test3/test4</code> 只会删除目录<code>test4</code>，现目录结构变为<code>test1/test2/test3</code></li>
<li><code>rmdir -p test1/test2/test3/test4</code> 效果等同于<code>rm -r test1</code>。<code>rmdir -p test1/test2/test3</code> 会报错：目录非空</li>
</ul>
<p>虽然使用 rmdir 比较不危险，但是局限大，只能删空目录，日常大多用<code>rm -r</code></p>
<h3 id="ls"><a href="#ls" class="headerlink" title="ls"></a>ls</h3><blockquote>
<p><code>ls [-aAdfFhilnrRSt] 目录名称</code><br>-a  ：全部的文件，连同隐藏档( 开头为 . 的文件) 一起列出来(常用)<br>-A  ：全部的文件，连同隐藏档，但不包括 . 与 .. 这两个目录<br>-d  ：仅列出目录本身，而不是列出目录内的文件数据(常用)<br>-f  ：直接列出结果，而不进行排序 (ls 默认会以档名排序！)<br>-F  ：根据文件、目录等资讯，给予附加数据结构，例如：<code>*</code>:代表可运行档； <code>/</code>:代表目录； <code>=</code>:代表 socket 文件； <code>|</code>:代表 FIFO 文件；<br>-h  ：将文件容量以人类较易读的方式(例如 GB, KB 等等)列出来；<br>-i  ：列出 inode 号码，inode 的意义下一章将会介绍；<br>-l  ：长数据串列出，包含文件的属性与权限等等数据；(常用)<br>-n  ：列出 UID 与 GID 而非使用者与群组的名称 (UID与GID会在帐号管理提到！)<br>-r  ：将排序结果反向输出，例如：原本档名由小到大，反向则为由大到小；<br>-R  ：连同子目录内容一起列出来，等於该目录下的所有文件都会显示出来；<br>-S  ：以文件容量大小排序，而不是用档名排序；<br>-t  ：依时间排序，而不是用档名。</p>
</blockquote>
<ul>
<li><code>ls -t</code> 以文件修改时间排序，修改时间越接近now排序越靠前，即修改顺序的逆序</li>
<li><code>ls -r</code>, –reverse 依相反次序排列，可以理解为逆序。<code>ls -tr</code> 修改时间的顺序</li>
</ul>
<h2 id="命令及文件查找"><a href="#命令及文件查找" class="headerlink" title="命令及文件查找"></a>命令及文件查找</h2><ul>
<li>命令文档名的查找：<code>which</code>或 <code>type</code>。这两个命令都是透过 <code>$PATH</code> 变量来搜寻档名；</li>
<li>文件文档名的查找：<code>whereis</code>, <code>locate</code>, <code>find</code>。<code>whereis</code> 或 <code>locate</code> 到数据库文件去搜寻，而不实际搜寻文件系统；利用 <code>find</code> 可以加入许多选项来直接查询文件系统，以获得自己想要知道的档名。</li>
</ul>
<h3 id="which-查找命令文档"><a href="#which-查找命令文档" class="headerlink" title="which 查找命令文档"></a>which 查找命令文档</h3><blockquote>
<p>which [-a] command<br>-a ：将所有由 <code>$PATH</code>目录中可以找到的命令均列出，而不止第一个被找到的命令名称<br>这个命令是根据<code>$PATH</code>这个环境变量所规范的路径，去搜寻命令的文档名。which 后面接的是要搜索的命令，若加上 -a 选项，则可以列出所有的可以找到的同名文档</p>
</blockquote>
<p>在终端机模式当中，连续输入两次<code>tab</code>按键就能够知道使用者有多少命令可以下达。 这些命令的完整文档路径可以透过 <code>which</code> 或 <code>type</code> 来搜索</p>
<ul>
<li><code>which cd</code> 常用命令<code>cd</code> 无法通过<code>which</code>找到，因为<code>cd</code>是bash内建的命令，而<code>which</code>默认是找<code>$PATH</code>内所规范的目录。<code>cd</code>需要通过<code>type cd</code>来查找</li>
</ul>
<h3 id="whereis-查找特定文件"><a href="#whereis-查找特定文件" class="headerlink" title="whereis 查找特定文件"></a>whereis 查找特定文件</h3><blockquote>
<p>whereis [-bmsu] 文件或目录名<br>-b    :只找 binary 格式的文件<br>-m    :只找在说明档 manual 路径下的文件<br>-s    :只找 source 来源文件<br>-u    :搜寻不在上述三个项目当中的其他特殊文件</p>
</blockquote>
<p>通常先使用 <code>whereis</code> 或者是 <code>locate</code> 来查找文件，如果真的找不到了，才以 <code>find</code> 来查找(<code>find</code> 是直接搜寻硬盘)。因为 <code>whereis</code> 与 <code>locate</code> 是利用数据库来搜寻数据，所以相当的快速，而且并没有实际的搜寻硬盘， 比较省时间</p>
<p>为什么<code>whereis</code> 比 <code>find</code> 快？<br>这是因为 Linux 系统会将系统内的所有文件都记录在一个数据库文件里面， 而当使用 <code>whereis</code> 或者是底下要说的 <code>locate</code> 时，都会以此数据库文件的内容为准， 因此，有的时后你还会发现使用这两个运行档时，会找到已经被杀掉的文件！ 而且也找不到最新的刚刚创建的文件呢！这就是因为这两个命令是由数据库当中的结果去搜寻文件的所在啊</p>
<h3 id="locate"><a href="#locate" class="headerlink" title="locate"></a>locate</h3><blockquote>
<p>locate [-ir] keyword<br>-i  ：忽略大小写的差异；<br>-r  ：后面可接正规表示法的显示方式</p>
</blockquote>
<p><code>locate passwd</code> ，那么在完整档名 (包含路径名称) 当中，只要有 <code>passwd</code> 在其中， 就会被显示出来</p>
<p><strong>限制</strong>：<br>使用 locate 来寻找数据的时候特别的快， 这是因为 locate 寻找的数据是由『已创建的数据库 /var/lib/mlocate/』 里面的数据所搜寻到的，所以不用直接在去硬盘当中存取数据</p>
<p>就是因为是经由数据库来搜寻的，而数据库的创建默认是在每天运行一次 (每个 distribution 都不同，CentOS 5.x 是每天升级数据库一次！)，所以当你新创建起来的文件， 却还在数据库升级之前搜寻该文件，那么 <code>locate</code> 会告诉你『找不到！』呵呵！因为必须要升级数据库呀！</p>
<p>那能否手动升级数据库哪？当然可以啊！升级 locate 数据库的方法非常简单，直接输入『 updatedb 』就可以了！ updatedb 命令会去读取 /etc/updatedb.conf 这个配置档的配置，然后再去硬盘里面进行搜寻档名的动作， 最后就升级整个数据库文件罗！因为 updatedb 会去搜寻硬盘，所以当你运行 updatedb 时，可能会等待数分钟的时间喔！</p>
<ul>
<li><code>updatedb</code>：根据 /etc/updatedb.conf 的配置去搜寻系统硬盘内的档名，并升级 /var/lib/mlocate 内的数据库文件；</li>
<li><code>locate</code>：依据 /var/lib/mlocate 内的数据库记载，找出使用者输入的关键字档名。</li>
</ul>
<h3 id="find"><a href="#find" class="headerlink" title="find"></a>find</h3><blockquote>
<p>find [PATH] [option] [action]</p>
<ol>
<li>与时间有关的选项：共有 -atime, -ctime 与 -mtime ，以 -mtime 说明<br>-mtime  n ：n 为数字，意义为在 n 天之前的『一天之内』被更动过内容的文件；<br>-mtime +n ：列出在 n 天之前(不含 n 天本身)被更动过内容的文件档名；<br>-mtime -n ：列出在 n 天之内(含 n 天本身)被更动过内容的文件档名。<br>-newer file ：file 为一个存在的文件，列出比 file 还要新的文件档名</li>
<li>与使用者或群组名称有关的参数：<br>-uid n ：n 为数字，这个数字是使用者的帐号 ID，亦即 UID ，这个 UID 是记录在<pre><code>     /etc/passwd 里面与帐号名称对应的数字。这方面我们会在第四篇介绍。
</code></pre>-gid n ：n 为数字，这个数字是群组名称的 ID，亦即 GID，这个 GID 记录在<pre><code>     /etc/group，相关的介绍我们会第四篇说明～
</code></pre>-user name ：name 为使用者帐号名称喔！例如 dmtsai<br>-group name：name 为群组名称喔，例如 users ；<br>-nouser    ：寻找文件的拥有者不存在 /etc/passwd 的人！<br>-nogroup   ：寻找文件的拥有群组不存在於 /etc/group 的文件！<pre><code>         当你自行安装软件时，很可能该软件的属性当中并没有文件拥有者，
         这是可能的！在这个时候，就可以使用 -nouser 与 -nogroup 搜寻。
</code></pre></li>
<li>与文件权限及名称有关的参数：<br>-name filename：搜寻文件名称为 filename 的文件；<br>-size [+-]SIZE：搜寻比 SIZE 还要大(+)或小(-)的文件。这个 SIZE 的规格有：<pre><code>            c: 代表 byte， k: 代表 1024bytes。所以，要找比 50KB
            还要大的文件，就是『 -size +50k 』
</code></pre>-type TYPE    ：搜寻文件的类型为 TYPE 的，类型主要有：一般正规文件 (f),<pre><code>            装置文件 (b, c), 目录 (d), 连结档 (l), socket (s), 
            及 FIFO (p) 等属性。
</code></pre>-perm mode  ：搜寻文件权限『刚好等於』 mode 的文件，这个 mode 为类似 chmod<pre><code>          的属性值，举例来说， -rwsr-xr-x 的属性为 4755 ！
</code></pre>-perm -mode ：搜寻文件权限『必须要全部囊括 mode 的权限』的文件，举例来说，<pre><code>          我们要搜寻 -rwxr--r-- ，亦即 0744 的文件，使用 -perm -0744，
          当一个文件的权限为 -rwsr-xr-x ，亦即 4755 时，也会被列出来，
          因为 -rwsr-xr-x 的属性已经囊括了 -rwxr--r-- 的属性了。
</code></pre>-perm +mode ：搜寻文件权限『包含任一 mode 的权限』的文件，举例来说，我们搜寻<pre><code>          -rwxr-xr-x ，亦即 -perm +755 时，但一个文件属性为 -rw-------
          也会被列出来，因为他有 -rw.... 的属性存在！
</code></pre></li>
<li>额外可进行的动作：<br>-exec command ：command 为其他命令，-exec 后面可再接额外的命令来处理搜寻到<pre><code>            的结果。
</code></pre>-print        ：将结果列印到萤幕上，这个动作是默认动作！</li>
</ol>
</blockquote>
<ul>
<li><code>find -name abc.sh</code> 按文件名查找文件abc.sh，会在硬盘查找，尽量少用<code>find</code>，先使用<code>whereis</code>和<code>locate</code></li>
</ul>
<h2 id="tar-打包压缩及解压"><a href="#tar-打包压缩及解压" class="headerlink" title="tar 打包压缩及解压"></a>tar 打包压缩及解压</h2><ul>
<li><p><code>tar -zcvf one.tar.gz 1/</code> 将文件夹1压缩打包为one.tar.gz</p>
</li>
<li><p><code>tar -cvf one.tar.gz 1/</code> 不压缩打包，更快，但是文件大小不减小</p>
</li>
<li><p><code>tar -xzvf</code> 解压。未压缩可使用<code>tar -xvf</code> 解压</p>
</li>
</ul>
<h2 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h2><h3 id="删除文件中所有内容"><a href="#删除文件中所有内容" class="headerlink" title="删除文件中所有内容"></a>删除文件中所有内容</h3><p>方法1:    按<code>ggdG</code><br>方法2:    <code>:%d</code></p>
<h3 id="区块选择"><a href="#区块选择" class="headerlink" title="区块选择"></a>区块选择</h3><div class="table-container">
<table>
<thead>
<tr>
<th>区块选择的按键</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>v</td>
<td>字符选择，会将光标经过的地方反白选择！</td>
</tr>
<tr>
<td>V</td>
<td>行选择，会将光标经过的行反白选择！</td>
</tr>
<tr>
<td>[Ctrl]+v</td>
<td>区块选择，可以用长方形的方式选择资料</td>
</tr>
<tr>
<td>y</td>
<td>将反白的地方复制起来，p粘贴</td>
</tr>
<tr>
<td>d</td>
<td>将反白的地方删除掉</td>
</tr>
</tbody>
</table>
</div>
<h2 id="crontab"><a href="#crontab" class="headerlink" title="crontab"></a>crontab</h2><blockquote>
<p>linux下用来周期性执行任务或等待处理某些事情的一个守护进程。用户所建立的crontab文件中，每一行都代表一项任务，每个的每个字段代表一项设置：共6个字段，前5个是时间设定，第6个是要执行的命令，格式如下：<br><code>minute   hour   day   month   week   command</code><br>minute： 表示分钟，可以是从0到59之间的任何整数。<br>hour：表示小时，可以是从0到23之间的任何整数。<br>day：表示日期，可以是从1到31之间的任何整数。<br>month：表示月份，可以是从1到12之间的任何整数。<br>week：表示星期几，可以是从0到7之间的任何整数，这里的0或7代表星期日。<br>command：要执行的命令，可以是系统命令，也可以是自己编写的脚本文件。</p>
</blockquote>
<ul>
<li><code>crontab -l</code> 列出</li>
<li><code>crontab FILENAME</code> 将文件FILENAME新增为定时任务，会覆盖之前crontab任务，慎用</li>
<li><code>crontab -e</code> 修改</li>
</ul>
<h2 id="alias"><a href="#alias" class="headerlink" title="alias"></a>alias</h2><ul>
<li><code>alias 新命令=&#39;原命令 -选项/参数&#39;</code> 设置命令别名</li>
<li><code>alias -p</code> 查看系统已设置的别名</li>
<li>令别名永久生效：(如果没有.bashrc文件就创建)<br><code>vim ~/.bashrc</code><br>在文件最后加上别名设置，如：<br><code>alias 90=&#39;ssh admin@111.111.111.90&#39;</code><br>完成后：<br><code>source ~/.bashrc</code></li>
<li>如果再某台机器上设置的alias干扰正常用法，可以使用<code>\rm filename</code>或者使用<code>/bin/rm filename</code>来删除，使用这两种方式使用的就不是alias中设置的rm了。</li>
</ul>
<h2 id="shell"><a href="#shell" class="headerlink" title="shell"></a>shell</h2><h3 id="统计和排序"><a href="#统计和排序" class="headerlink" title="统计和排序"></a>统计和排序</h3><ul>
<li><p><code>wc -l</code> 统计行数</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bash-3.2$ wc -l filename.txt</span><br><span class="line">       3 filename.txt</span><br><span class="line">bash-3.2$ cat filename.txt | wc -l</span><br><span class="line">       3</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>uniq</code> 的一个特性：检查重复行的时候只会检查相邻的行。所以去重前需要先保证有序：<code>sort | uniq</code>。或者直接使用<code>sort -u</code></p>
</li>
<li><code>sort</code> 默认以字符升序排列</li>
</ul>
<h3 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h3><ul>
<li><code>awk -F</code> 指定输入文本分隔符拆分。<code>awk -F&quot;\t&quot; &#39;{print $5}&#39;</code> 表示以”\t”为分隔符切分文本，并打印第5列（从1开始计数）。<code>{print $0}</code> 表示打印整行。</li>
<li><code>awk -v var=value</code> 赋值一个用户定义变量，将外部变量传递给awk</li>
</ul>
<h3 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h3><ul>
<li><code>grep -n</code> 显示行号</li>
<li><code>grep -A 3 -B 3</code> 显示前后3行</li>
</ul>
<h3 id="数组-array"><a href="#数组-array" class="headerlink" title="数组 array"></a>数组 array</h3><h4 id="shell脚本中的list-array"><a href="#shell脚本中的list-array" class="headerlink" title="shell脚本中的list(array)"></a>shell脚本中的list(array)</h4><p><a href="https://stackoverflow.com/questions/12316167/does-linux-shell-support-list-data-structure" target="_blank" rel="noopener">does linux shell support list data structure?</a> </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">array=(<span class="string">"item 1"</span> <span class="string">"item 2"</span> <span class="string">"item 3"</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 这么创建list，中间能够包含空格。如果中间不包含空格，可以不加引号，如：</span></span><br><span class="line">array=(red orange white <span class="string">"light gray"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建list及访问元素（推荐），元素本身可以包含空格</span></span><br><span class="line">array=(<span class="string">"item 1"</span> <span class="string">"item 2"</span> <span class="string">"item 3"</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">"<span class="variable">$&#123;array[@]&#125;</span>"</span>; <span class="keyword">do</span>   <span class="comment"># The quotes are necessary here</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$i</span>"</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#item 1</span></span><br><span class="line"><span class="comment">#item 2</span></span><br><span class="line"><span class="comment">#item 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果$&#123;array[@]&#125;不加引号，则元素被空格分开</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$&#123;array[@]&#125;</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="comment">#item</span></span><br><span class="line"><span class="comment">#1</span></span><br><span class="line"><span class="comment">#item</span></span><br><span class="line"><span class="comment">#2</span></span><br><span class="line"><span class="comment">#item</span></span><br><span class="line"><span class="comment">#3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用如下方式</span></span><br><span class="line">list=<span class="string">'"item 1" "item 2" "item 3"'</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$list</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="comment">#"item</span></span><br><span class="line"><span class="comment">#1"</span></span><br><span class="line"><span class="comment">#"item</span></span><br><span class="line"><span class="comment">#2"</span></span><br><span class="line"><span class="comment">#"item</span></span><br><span class="line"><span class="comment">#3"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将$list看做一个字符串，并非list（array）</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">"<span class="variable">$list</span>"</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="comment">#"item 1" "item 2" "item 3"</span></span><br></pre></td></tr></table></figure>
<h4 id="使用array存储命令"><a href="#使用array存储命令" class="headerlink" title="使用array存储命令"></a>使用array存储命令</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cmd_str_list=(&quot;sh run.sh a&quot;</span><br><span class="line">&quot;sh run.sh b&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">for ((i = 0; i &lt; $&#123;#cmd_str_list[@]&#125;; i++))</span><br><span class="line">do</span><br><span class="line">    cmd_str=&quot;$&#123;cmd_str_list[$i]&#125;&quot;</span><br><span class="line">    echo $&#123;cmd_str&#125;</span><br><span class="line">    eval $&#123;cmd_str&#125;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>参考: <a href="https://stackoverflow.com/questions/9084257/bash-array-with-spaces-in-elements" target="_blank" rel="noopener">Bash array with spaces in elements</a></p>
<h4 id="ls结果分配给数组"><a href="#ls结果分配给数组" class="headerlink" title="ls结果分配给数组"></a>ls结果分配给数组</h4><ul>
<li><code>array=($(ls file))</code>在Linux Bash中，将ls结果分配给数组。可用下标访问</li>
</ul>
<h4 id="数组拷贝"><a href="#数组拷贝" class="headerlink" title="数组拷贝"></a>数组拷贝</h4><p>参考：<a href="https://stackoverflow.com/questions/19417015/how-to-copy-an-array-in-bash" target="_blank" rel="noopener">How to copy an array in Bash?</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a=(foo bar <span class="string">"foo 1"</span> <span class="string">"bar two"</span>)  <span class="comment">#create an array</span></span><br><span class="line">b=(<span class="string">"<span class="variable">$&#123;a[@]&#125;</span>"</span>)                  <span class="comment">#copy the array in another one </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> value <span class="keyword">in</span> <span class="string">"<span class="variable">$&#123;b[@]&#125;</span>"</span> ; <span class="keyword">do</span>    <span class="comment">#print the new array </span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$value</span>"</span> </span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<h3 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h3><p><code>echo -e</code> 打印特殊字符，如tab<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"a\tb"</span></span><br><span class="line"><span class="comment">#a\tb</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"a\tb"</span></span><br><span class="line"><span class="comment">#a   b</span></span><br></pre></td></tr></table></figure></p>
<h3 id="expr数学计算"><a href="#expr数学计算" class="headerlink" title="expr数学计算"></a>expr数学计算</h3><p><code>1+2</code>字符串，<code>1 + 2</code>数学计算（注意空格）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bash-3.2 d$ expr 1+2</span><br><span class="line">1+2</span><br><span class="line">bash-3.2$ expr 1 + 2</span><br><span class="line">3</span><br></pre></td></tr></table></figure>
<h3 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h3><ul>
<li><code>sed &#39;1d&#39;</code> 删除第一行，更多介绍：<a href="https://www.cnblogs.com/ggjucheng/archive/2013/01/13/2856901.html" target="_blank" rel="noopener">https://www.cnblogs.com/ggjucheng/archive/2013/01/13/2856901.html</a></li>
<li><code>sed &#39;s/要替换的字符串/新的字符串/g&#39;</code></li>
</ul>
<h3 id="变量替换"><a href="#变量替换" class="headerlink" title="变量替换"></a>变量替换</h3><p>除了使用<code>sed &#39;s/要替换的字符串/新的字符串/g&#39;</code>，还可以使用：<br><code>${变量/旧字符串/新字符串}</code> 若变量内容符合“旧字符串”，则第一个旧字符串会被新字符串替换。<br><code>${变量//旧字符串/新字符串}</code> 若变量内容符合“旧字符串”，则全部的旧字符串会被新字符串替换。<br>也可以在旧字符前加\，结果一致。如果需要替换转义符，需要加\<br>例如：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">bash-3.2$ header=<span class="string">"theme_res_id\tdid\tc3_dist"</span></span><br><span class="line">bash-3.2$ <span class="built_in">echo</span> <span class="variable">$&#123;header//id/,&#125;</span> <span class="comment"># 将id替换为,</span></span><br><span class="line">theme_res_,\td,\tc3_dist</span><br><span class="line">bash-3.2$ <span class="built_in">echo</span> <span class="variable">$&#123;header//\t/,&#125;</span> <span class="comment"># 将t替换为,</span></span><br><span class="line">,heme_res_id\,did\,c3_dis,</span><br><span class="line">bash-3.2$ <span class="built_in">echo</span> <span class="variable">$&#123;header//\\t/,&#125;</span> <span class="comment"># 将转义符\t替换为,</span></span><br><span class="line">theme_res_id,did,c3_dist</span><br></pre></td></tr></table></figure></p>
<p>参考： Bash变量的删除、取代与替换<a href="https://andyyoung01.github.io/2017/02/21/Bash%E5%8F%98%E9%87%8F%E7%9A%84%E5%88%A0%E9%99%A4%E3%80%81%E5%8F%96%E4%BB%A3%E4%B8%8E%E6%9B%BF%E6%8D%A2/" target="_blank" rel="noopener">https://andyyoung01.github.io/2017/02/21/Bash%E5%8F%98%E9%87%8F%E7%9A%84%E5%88%A0%E9%99%A4%E3%80%81%E5%8F%96%E4%BB%A3%E4%B8%8E%E6%9B%BF%E6%8D%A2/</a></p>
<h3 id="string-split"><a href="#string-split" class="headerlink" title="string split"></a>string split</h3><ul>
<li>shell脚本中string split功能：<a href="https://stackoverflow.com/questions/918886/how-do-i-split-a-string-on-a-delimiter-in-bash?page=1&amp;tab=votes#tab-top" target="_blank" rel="noopener">https://stackoverflow.com/questions/918886/how-do-i-split-a-string-on-a-delimiter-in-bash?page=1&amp;tab=votes#tab-top</a> 。使用cut比较简洁：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"bla@some.com;john@home.com"</span> | cut -d <span class="string">";"</span> -f 1</span><br><span class="line">bla@some.com</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">"bla@some.com;john@home.com"</span> | cut -d <span class="string">";"</span> -f 2</span><br><span class="line">john@home.com</span><br></pre></td></tr></table></figure>
<h3 id="函数返回值"><a href="#函数返回值" class="headerlink" title="函数返回值"></a>函数返回值</h3><p>中文参考：<a href="https://blog.csdn.net/mdx20072419/article/details/9381339" target="_blank" rel="noopener">shell 函数返回值接收问题</a><br><a href="https://blog.csdn.net/ithomer/article/details/7954577" target="_blank" rel="noopener">Linux Shell函数返回值</a></p>
<p>函数可以有返回值，return，但是需要返回值是数字，而不能是字符串，字符串会提示：<code>/data0/home/rec/chengsujun/test_ly/search_index_builder/DataHope/scripts/../utils.sh: line 33: return: index_data/sku_precise/2019-01-16: numeric argument required</code></p>
<p>虽然有这个提示，但是执行似乎成功了</p>
<p><a href="https://stackoverflow.com/questions/3236871/how-to-return-a-string-value-from-a-bash-function" target="_blank" rel="noopener">How to return a string value from a Bash function</a></p>
<p>点赞最高：没有什么方法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">func_mk_hadoop_dir</span></span>()&#123;</span><br><span class="line">    <span class="built_in">local</span> date=<span class="variable">$&#123;1&#125;</span></span><br><span class="line">    <span class="built_in">local</span> index_type=<span class="variable">$&#123;2&#125;</span></span><br><span class="line">    <span class="built_in">local</span> HADOOP_DATA_DIR=<span class="variable">$&#123;HADOOP_DIR&#125;</span>/<span class="variable">$&#123;index_type&#125;</span>/<span class="variable">$&#123;date&#125;</span></span><br><span class="line">    <span class="built_in">return</span> <span class="string">"<span class="variable">$&#123;HADOOP_DATA_DIR&#125;</span>"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#调用加``符号</span></span><br><span class="line">hadoop_data_dir=`func_mk_hadoop_dir <span class="variable">$&#123;date&#125;</span> <span class="variable">$&#123;index_type&#125;</span>`</span><br><span class="line"><span class="comment">#这么执行报错：return: index_data/sku_precise/2019-01-16: numeric argument required</span></span><br></pre></td></tr></table></figure>
<p>使用echo方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function func_mk_hadoop_dir()&#123;</span><br><span class="line">    local date=$&#123;1&#125;</span><br><span class="line">    local index_type=$&#123;2&#125;</span><br><span class="line">    local HADOOP_DATA_DIR=$&#123;HADOOP_DIR&#125;/$&#123;index_type&#125;/$&#123;date&#125;</span><br><span class="line">    echo &quot;$&#123;HADOOP_DATA_DIR&#125;&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="报错：“integer-expression-expected”（需要的是整数"><a href="#报错：“integer-expression-expected”（需要的是整数" class="headerlink" title="报错：“integer expression expected”（需要的是整数)"></a>报错：“integer expression expected”（需要的是整数)</h3><p>将字符串比较写为了整数比较的格式，就会出现这个报错。这是在比较两个日期时报的错，解决方案： <a href="https://unix.stackexchange.com/questions/84381/how-to-compare-two-dates-in-a-shell" target="_blank" rel="noopener">https://unix.stackexchange.com/questions/84381/how-to-compare-two-dates-in-a-shell</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">todate=2013-07-18</span><br><span class="line">cond=2013-07-15</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$todate</span> -ge <span class="variable">$cond</span> ];</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">"break"</span></span><br><span class="line"><span class="keyword">fi</span>    </span><br><span class="line"></span><br><span class="line"><span class="comment"># 将变量用引号引起来，-ge修改为&gt;，改写为：（if中[[]]也可替换为[]）</span></span><br><span class="line">date_a=2013-07-18</span><br><span class="line">date_b=2013-07-15</span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">"<span class="variable">$date_a</span>"</span> &gt; <span class="string">"<span class="variable">$date_b</span>"</span> ]] ;</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"break"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 备注：也有其他方案例如先将日期转为整数再比较：</span></span><br><span class="line">todate=$(date -d 2013-07-18 +%s)</span><br><span class="line">cond=$(date -d 2014-08-19 +%s)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">todate=$(date -d 2013-07-18 +<span class="string">"%Y%m%d"</span>)  <span class="comment"># = 20130718</span></span><br><span class="line">cond=$(date -d 2013-07-15 +<span class="string">"%Y%m%d"</span>)    <span class="comment"># = 20130715</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者删除-</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">"2013-07-15"</span> | tr -d <span class="string">"-"</span></span><br><span class="line">20130715</span><br></pre></td></tr></table></figure>
<h3 id="报错：bad-substitution"><a href="#报错：bad-substitution" class="headerlink" title="报错：bad substitution"></a>报错：bad substitution</h3><p><code>for i in ${awk -F &quot;:&quot; &#39;{print $1}&#39; /etc/passwd | grep stu}</code>报错<code>${awk -F &quot;:&quot; &#39;{print $1}&#39; /etc/passwd | grep stu}: bad substitution</code></p>
<p>变量引用是<code>$()</code>，而不是<code>${}</code>，所以只需要把这行代码改为：<code>for i in $(awk -F &quot;:&quot; &#39;{print $1}&#39; /etc/passwd | grep stu)</code></p>
<h3 id="输出到文件需要加echo"><a href="#输出到文件需要加echo" class="headerlink" title="输出到文件需要加echo"></a>输出到文件需要加echo</h3><p>例如：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a=5</span><br><span class="line"><span class="variable">$a</span>&gt;t.txt</span><br></pre></td></tr></table></figure></p>
<p>会报错：<code>-bash: 5: command not found</code>，文件t.txt中没有内容</p>
<p>正确方式是：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a=5</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$a</span>&gt;t.txt</span><br></pre></td></tr></table></figure>
<h3 id="shell-脚本中set命令"><a href="#shell-脚本中set命令" class="headerlink" title="shell 脚本中set命令"></a>shell 脚本中set命令</h3><h4 id="set-e"><a href="#set-e" class="headerlink" title="set -e"></a>set -e</h4><p><code>-e</code> 选项作用范围 :<a href="https://blog.csdn.net/fc34235/article/details/76598448" target="_blank" rel="noopener">https://blog.csdn.net/fc34235/article/details/76598448</a></p>
<blockquote>
<p>set -e就是当命令以非零状态退出时，则退出shell。主要作用是，当脚本执行出现意料之外的情况时，立即退出，避免错误被忽略，导致最终结果不正确。</p>
<p>set -e 命令用法总结如下：</p>
<p>1.当命令的返回值为非零状态时，则立即退出脚本的执行。</p>
<p>2.作用范围只限于脚本执行的当前进行，不作用于其创建的子进程。</p>
<p>3.另外，当想根据命令执行的返回值，输出对应的log时，最好不要采用set -e选项，而是通过配合exit 命令来达到输出log并退出执行的目的。</p>
</blockquote>
<h4 id="set-u"><a href="#set-u" class="headerlink" title="set -u"></a>set -u</h4><p>参考：(<a href="http://man.linuxde.net/set" target="_blank" rel="noopener">http://man.linuxde.net/set</a>)</p>
<p><code>set -u</code>：当执行时使用到未定义过的变量，则显示错误信息。 </p>
<p>不要在公共机器上<code>set -u</code>，会导致自动补全功能失效，并报错：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> sear-bash: !ref: unbound variable</span><br><span class="line">-bash: !ref: unbound variable</span><br><span class="line">-bash: words[i]: unbound variable</span><br></pre></td></tr></table></figure>
<p>关闭： <code>set +u</code></p>
<p><code>set -x</code>同理，关闭:<code>set +x</code></p>
<h2 id="查看物理cpu与逻辑cpu概述"><a href="#查看物理cpu与逻辑cpu概述" class="headerlink" title="查看物理cpu与逻辑cpu概述"></a>查看物理cpu与逻辑cpu概述</h2><p><a href="https://blog.csdn.net/BeautifulGrils/article/details/79799634" target="_blank" rel="noopener">https://blog.csdn.net/BeautifulGrils/article/details/79799634</a></p>
<ol>
<li>物理cpu数：主板上实际插入的cpu数量，可以数不重复的 physical id 有几个（physical id）</li>
<li>cpu核数：单块CPU上面能处理数据的芯片组的数量，如双核、四核等 （cpu cores）</li>
<li>逻辑cpu数：一般情况下，逻辑cpu=物理CPU个数×每颗核数，如果不相等的话，则表示服务器的CPU支持超线程技术（HT：简单来说，它可使处理器中的1 颗内核如2 颗内核那样在操作系统中发挥作用。这样一来，操作系统可使用的执行资源扩大了一倍，大幅提高了系统的整体性能，此时逻辑cpu=物理CPU个数×每颗核数x2）<br>备注一下：Linux下top查看的CPU也是逻辑CPU个数<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看物理cpu个数：</span></span><br><span class="line">cat /proc/cpuinfo |grep <span class="string">"physical id"</span>| sort -u | wc -l</span><br><span class="line">2</span><br><span class="line"><span class="comment">#查看逻辑cpu个数：（核数？=逻辑cpu个数）</span></span><br><span class="line">cat /proc/cpuinfo |grep processor| wc -l</span><br><span class="line">32</span><br><span class="line"><span class="comment">#查看cpu核数：（单个cpu的核数?所有的核数需要*物理cpu个数，由于超线程技术，因此再*2）</span></span><br><span class="line">cat /proc/cpuinfo |grep cores|uniq</span><br><span class="line">8</span><br><span class="line"><span class="comment">#查看CPU型号：cpu型号是 E5-2640</span></span><br><span class="line">cat /proc/cpuinfo | grep name | cut -f2 -d: | uniq -c</span><br><span class="line">32  Intel(R) Xeon(R) CPU E5-2640 v2 @ 2.00GHz</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><a href="http://www.uuboku.com/137.html" target="_blank" rel="noopener">http://www.uuboku.com/137.html</a></p>
<h2 id="查看内存"><a href="#查看内存" class="headerlink" title="查看内存"></a>查看内存</h2><p>可使用<code>free</code>，默认单位是kB，free -m单位是M，free -g单位是G）<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">free -m</span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:          31963       11688        1143         368       19131       19476</span><br><span class="line">Swap:         16383        1419       14964</span><br><span class="line"><span class="comment">#总的物理内存为 32G，虚拟内存为16G（由于进制的关系，上面显示的是 31963  和 16383）。</span></span><br><span class="line"></span><br><span class="line">cat /proc/meminfo</span><br><span class="line">MemTotal:       32730616 kB</span><br><span class="line">MemFree:         1168892 kB</span><br><span class="line">MemAvailable:   19942200 kB</span><br><span class="line">Buffers:               0 kB</span><br><span class="line">Cached:         18844272 kB</span><br><span class="line"><span class="comment">#看第一行 32730616 kB，总的物理内存为32G</span></span><br></pre></td></tr></table></figure></p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ul>
<li><code>ssh</code> 默认从<code>~/.ssh/</code>中匹配，所以，如果这个目录下.ssh不可用（由于文件权限等原因），在个人目录中新生成<code>.ssh</code>文件，在执行时应该使用<code>-i</code>显示指定<code>.ssh/id_rsa</code>文件地址</li>
<li><code>hostname -i</code> 获取本机ip</li>
<li><code>select_dt=$(date -d &#39;&#39;${input_dt}&#39; day&#39; +%Y-%m-%d)</code> 注意这里的参数${input_dt}必须用单引号引起来，否则会报错。shell：引号里面用需要加引号</li>
<li><code>if [ $# -ge 2 ] ; then</code> 如果参数的数量&gt;2，$# 表示设置的参数个数</li>
<li><code>${where_condition:=1=1}</code><br>参考：<a href="http://www.cnblogs.com/fhefh/archive/2011/04/22/2024750.html" target="_blank" rel="noopener">http://www.cnblogs.com/fhefh/archive/2011/04/22/2024750.html</a><br>: ${VAR:=”some default”}<br>这些代码开始的冒号是一个正确执行非活动任务的shell命令。在这个句法中，它仅仅扩展了行中紧随其后的所有参数。本例中，只要是要在花括号内扩展参数值。<br>本行ongoing冒号中的参数是最有趣的部分；它是用花括号起来的一些逻辑的参数扩展。:=句法表示VAR变量将会和“some defalut”字符串进行比较。<br>在这个表达式中，如果变量VAR还没有被设置，那么“:=”之后表达式的值将被赋给它，这个值可能是一个数字，一个字符串，或者是另外一个变量。</li>
<li><code>sudo netstat -anp | grep TIME_WAIT | grep :22</code> 查看22端口</li>
<li><code>kill -9</code> 进程即刻结束</li>
<li>取出字符串中变量 <code>${!c}</code></li>
</ul>
<p>参考：</p>
<ul>
<li><a href="http://cn.linux.vbird.org/" target="_blank" rel="noopener">鸟哥的Linux私房菜</a></li>
</ul>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Linux/" rel="tag"># Linux</a>
          
            <a href="/tags/shell/" rel="tag"># shell</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/04/08/数据结构-1-栈、队列和链表/" rel="next" title="数据结构-1-栈、队列和链表">
                <i class="fa fa-chevron-left"></i> 数据结构-1-栈、队列和链表
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/04/11/数据结构-2-数组、字符串/" rel="prev" title="数据结构-2-数组、字符串">
                数据结构-2-数组、字符串 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">ywtail</p>
              <p class="site-description motion-element" itemprop="description">Be a man.</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">71</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">17</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">25</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#文件、目录"><span class="nav-number">1.</span> <span class="nav-text">文件、目录</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#chmod-文件权限"><span class="nav-number">1.1.</span> <span class="nav-text">chmod 文件权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cd"><span class="nav-number">1.2.</span> <span class="nav-text">cd</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pwd"><span class="nav-number">1.3.</span> <span class="nav-text">pwd</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mkdir"><span class="nav-number">1.4.</span> <span class="nav-text">mkdir</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rmdir"><span class="nav-number">1.5.</span> <span class="nav-text">rmdir</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ls"><span class="nav-number">1.6.</span> <span class="nav-text">ls</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#命令及文件查找"><span class="nav-number">2.</span> <span class="nav-text">命令及文件查找</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#which-查找命令文档"><span class="nav-number">2.1.</span> <span class="nav-text">which 查找命令文档</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#whereis-查找特定文件"><span class="nav-number">2.2.</span> <span class="nav-text">whereis 查找特定文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#locate"><span class="nav-number">2.3.</span> <span class="nav-text">locate</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#find"><span class="nav-number">2.4.</span> <span class="nav-text">find</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tar-打包压缩及解压"><span class="nav-number">3.</span> <span class="nav-text">tar 打包压缩及解压</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vim"><span class="nav-number">4.</span> <span class="nav-text">vim</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#删除文件中所有内容"><span class="nav-number">4.1.</span> <span class="nav-text">删除文件中所有内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#区块选择"><span class="nav-number">4.2.</span> <span class="nav-text">区块选择</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#crontab"><span class="nav-number">5.</span> <span class="nav-text">crontab</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#alias"><span class="nav-number">6.</span> <span class="nav-text">alias</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#shell"><span class="nav-number">7.</span> <span class="nav-text">shell</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#统计和排序"><span class="nav-number">7.1.</span> <span class="nav-text">统计和排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#awk"><span class="nav-number">7.2.</span> <span class="nav-text">awk</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#grep"><span class="nav-number">7.3.</span> <span class="nav-text">grep</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数组-array"><span class="nav-number">7.4.</span> <span class="nav-text">数组 array</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#shell脚本中的list-array"><span class="nav-number">7.4.1.</span> <span class="nav-text">shell脚本中的list(array)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用array存储命令"><span class="nav-number">7.4.2.</span> <span class="nav-text">使用array存储命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ls结果分配给数组"><span class="nav-number">7.4.3.</span> <span class="nav-text">ls结果分配给数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#数组拷贝"><span class="nav-number">7.4.4.</span> <span class="nav-text">数组拷贝</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#echo"><span class="nav-number">7.5.</span> <span class="nav-text">echo</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#expr数学计算"><span class="nav-number">7.6.</span> <span class="nav-text">expr数学计算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sed"><span class="nav-number">7.7.</span> <span class="nav-text">sed</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#变量替换"><span class="nav-number">7.8.</span> <span class="nav-text">变量替换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#string-split"><span class="nav-number">7.9.</span> <span class="nav-text">string split</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#函数返回值"><span class="nav-number">7.10.</span> <span class="nav-text">函数返回值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#报错：“integer-expression-expected”（需要的是整数"><span class="nav-number">7.11.</span> <span class="nav-text">报错：“integer expression expected”（需要的是整数)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#报错：bad-substitution"><span class="nav-number">7.12.</span> <span class="nav-text">报错：bad substitution</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#输出到文件需要加echo"><span class="nav-number">7.13.</span> <span class="nav-text">输出到文件需要加echo</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#shell-脚本中set命令"><span class="nav-number">7.14.</span> <span class="nav-text">shell 脚本中set命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#set-e"><span class="nav-number">7.14.1.</span> <span class="nav-text">set -e</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#set-u"><span class="nav-number">7.14.2.</span> <span class="nav-text">set -u</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看物理cpu与逻辑cpu概述"><span class="nav-number">8.</span> <span class="nav-text">查看物理cpu与逻辑cpu概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看内存"><span class="nav-number">9.</span> <span class="nav-text">查看内存</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#其他"><span class="nav-number">10.</span> <span class="nav-text">其他</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ywtail</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v6.7.0</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="总访客量">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="总访问量">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=6.7.0"></script>

  <script src="/js/src/motion.js?v=6.7.0"></script>



  
  


  <script src="/js/src/schemes/muse.js?v=6.7.0"></script>




  
  <script src="/js/src/scrollspy.js?v=6.7.0"></script>
<script src="/js/src/post-details.js?v=6.7.0"></script>



  


  <script src="/js/src/bootstrap.js?v=6.7.0"></script>



  
  

<script src="//cdn1.lncld.net/static/js/3.11.1/av-min.js"></script>



<script src="//unpkg.com/valine/dist/Valine.min.js"></script>

<script>
  var GUEST = ['nick', 'mail', 'link'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(function(item) {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#comments',
    verify: false,
    notify: false,
    appId: 'Hn01Iq5tm1St1y55hF5K2M1P-gzGzoHsz',
    appKey: 'VMAeg3KLjfddIO4nxJCqersc',
    placeholder: '在此处输入评论',
    avatar: 'mm',
    meta: guest,
    pageSize: '10' || 10,
    visitor: false
  });
</script>




  


  

  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  
  
  <script>
    
    function addCount(Counter) {
      var $visitors = $('.leancloud_visitors');
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();

      Counter('get', '/classes/Counter', { where: JSON.stringify({ url }) })
        .done(function({ results }) {
          if (results.length > 0) {
            var counter = results[0];
            
            Counter('put', '/classes/Counter/' + counter.objectId, JSON.stringify({ time: { '__op': 'Increment', 'amount': 1 } }))
            
              .done(function() {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.time + 1);
              })
            
              .fail(function ({ responseJSON }) {
                console.log(`Failed to save Visitor num, with error message: ${responseJSON.error}`);
              })
          } else {
            
              Counter('post', '/classes/Counter', JSON.stringify({ title: title, url: url, time: 1 }))
                .done(function() {
                  var $element = $(document.getElementById(url));
                  $element.find('.leancloud-visitors-count').text(1);
                })
                .fail(function() {
                  console.log('Failed to create');
                });
            
          }
        })
        .fail(function ({ responseJSON }) {
          console.log(`LeanCloud Counter Error: ${responseJSON.code} ${responseJSON.error}`);
        });
    }
    

    $(function() {
      $.get('https://app-router.leancloud.cn/2/route?appId=' + 'Hn01Iq5tm1St1y55hF5K2M1P-gzGzoHsz')
        .done(function({ api_server }) {
          var Counter = function(method, url, data) {
            return $.ajax({
              method: method,
              url: 'https://' + api_server + '/1.1' + url,
              headers: {
                'X-LC-Id': 'Hn01Iq5tm1St1y55hF5K2M1P-gzGzoHsz',
                'X-LC-Key': 'VMAeg3KLjfddIO4nxJCqersc',
                'Content-Type': 'application/json',
              },
              data: data
            });
          };
          
            addCount(Counter);
          
        });
    });
  </script>



  

  

  

  
  

  
  

  


  

  

  

  

  

  

  

  

</body>
</html>
